{"version":3,"file":"FilterModels.js","sourceRoot":"","sources":["../../../../src/ApiShared/Models/FilterModels.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Contract from '@tableau/api-external-contract-js';\nimport { DateRangeType, FilterDomainType, FilterType, PeriodType } from '@tableau/api-external-contract-js';\nimport { HierarchicalLevelSelectionState } from '@tableau/api-external-contract-js/lib/src/ExternalContract/Shared/Namespaces/Tableau';\nimport { DataSourceService } from '../Services/DataSourceService';\nimport { FilterService } from '../Services/FilterService';\nimport { ApiServiceRegistry, ServiceNames } from '../Services/ServiceRegistry';\nimport { ErrorHelpers } from '../Utils/ErrorHelpers';\n\nexport class Filter implements Contract.Filter {\n  public constructor(\n    protected _worksheetName: string,\n    protected _fieldName: string,\n    protected _filterType: FilterType,\n    protected _fieldId: string,\n    protected _registryId: number,\n  ) {}\n\n  public get worksheetName(): string {\n    return this._worksheetName;\n  }\n\n  public get fieldName(): string {\n    return this._fieldName;\n  }\n\n  public get fieldId(): string {\n    return this._fieldId;\n  }\n\n  public get filterType(): FilterType {\n    return this._filterType;\n  }\n\n  public getFieldAsync(): Promise<Contract.Field> {\n    const service = ApiServiceRegistry.get(this._registryId).getService<DataSourceService>(ServiceNames.DataSourceService);\n    return service.getFieldAsync(this._fieldId);\n  }\n\n  public getAppliedWorksheetsAsync(): Promise<Array<string>> {\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    return service.getAppliedWorksheetsAsync(this._worksheetName, this._fieldId);\n  }\n\n  public setAppliedWorksheetsAsync(applyToWorksheets: Array<string>): Promise<Array<string>> {\n    ErrorHelpers.verifyParameter(applyToWorksheets, 'applyToWorksheets');\n    const uniqueWorksheets = new Set(applyToWorksheets);\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    return service.setAppliedWorksheetsAsync(this._worksheetName, this._fieldName, this._fieldId, Array.from(uniqueWorksheets));\n  }\n}\n\nexport class CategoricalFilter extends Filter implements Contract.CategoricalFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _appliedValues: Array<Contract.DataValue>,\n    private _isExcludeMode: boolean,\n    private _isAllSelected?: boolean,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n\n  public get isAllSelected(): boolean | undefined {\n    return this._isAllSelected;\n  }\n\n  public get appliedValues(): Array<Contract.DataValue> {\n    return this._appliedValues;\n  }\n\n  public get isExcludeMode(): boolean {\n    return this._isExcludeMode;\n  }\n\n  public getDomainAsync(domainType?: FilterDomainType): Promise<Contract.CategoricalDomain> {\n    if (!domainType) {\n      domainType = FilterDomainType.Relevant;\n    }\n\n    ErrorHelpers.verifyEnumValue<FilterDomainType>(domainType, FilterDomainType, 'FilterDomainType');\n\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    return service.getCategoricalDomainAsync(this._worksheetName, this._fieldId, domainType);\n  }\n}\n\nexport class HierarchicalDataValue implements Contract.HierarchicalFilterDataValue {\n  public constructor(private _value: Contract.DataValue, private _hierarchicalPath: string, private _level: number) {}\n\n  public get value(): Contract.DataValue {\n    return this._value;\n  }\n\n  public get hierarchicalPath(): string {\n    return this._hierarchicalPath;\n  }\n\n  public get level(): number {\n    return this._level;\n  }\n}\n\nexport class HierarchicalLevelDetail implements Contract.HierarchicalLevelDetail {\n  public constructor(private _name: string, private _levelSelectionState: HierarchicalLevelSelectionState) {}\n\n  public get name(): string {\n    return this._name;\n  }\n\n  public get levelSelectionState(): HierarchicalLevelSelectionState {\n    return this._levelSelectionState;\n  }\n}\n\nexport class HierarchicalFilter extends Filter implements Contract.HierarchicalFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _dimensionName: string,\n    private _hierarchyCaption: string,\n    private _numberOfLevels: number,\n    private _levelDetails: Array<Contract.HierarchicalLevelDetail>,\n    private _appliedValues: Array<Contract.HierarchicalFilterDataValue>,\n    private _isAllSelected: boolean,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n  getDomainAsync(domainType?: Contract.FilterDomainType): Promise<Contract.CategoricalDomain> {\n    throw new Error('Method not implemented.');\n  }\n\n  public get dimensionName(): string {\n    return this._dimensionName;\n  }\n\n  public get hierarchyCaption(): string {\n    return this._hierarchyCaption;\n  }\n\n  public get numberOfLevels(): number {\n    return this._numberOfLevels;\n  }\n\n  public get levelDetails(): Contract.HierarchicalLevelDetail[] {\n    return this._levelDetails;\n  }\n\n  public get isAllSelected(): boolean {\n    return this._isAllSelected;\n  }\n\n  public get appliedValues(): Array<Contract.HierarchicalFilterDataValue> {\n    return this._appliedValues;\n  }\n}\n\nexport class RangeFilter extends Filter implements Contract.RangeFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _min: Contract.DataValue,\n    private _max: Contract.DataValue,\n    private _includeNullValues: boolean,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n\n  public get minValue(): Contract.DataValue {\n    return this._min;\n  }\n\n  public get maxValue(): Contract.DataValue {\n    return this._max;\n  }\n\n  public get includeNullValues(): boolean {\n    return this._includeNullValues;\n  }\n\n  public getDomainAsync(domainType?: FilterDomainType): Promise<Contract.RangeDomain> {\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    if (!domainType) {\n      domainType = FilterDomainType.Relevant;\n    }\n\n    ErrorHelpers.verifyEnumValue<FilterDomainType>(domainType, FilterDomainType, 'FilterDomainType');\n\n    return service.getRangeDomainAsync(this._worksheetName, this._fieldId, domainType);\n  }\n}\n\nexport class RelativeDateFilter extends Filter implements Contract.RelativeDateFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _anchorDate: Contract.DataValue,\n    private _periodType: PeriodType,\n    private _rangeType: DateRangeType,\n    private _rangeN: number,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n\n  public get anchorDate(): Contract.DataValue {\n    return this._anchorDate;\n  }\n\n  public get periodType(): PeriodType {\n    return this._periodType;\n  }\n\n  public get rangeType(): DateRangeType {\n    return this._rangeType;\n  }\n\n  public get rangeN(): number {\n    return this._rangeN;\n  }\n}\n\nexport class CategoricalDomain implements Contract.CategoricalDomain {\n  public constructor(private _values: Array<Contract.DataValue>, private _domainType: FilterDomainType) {}\n\n  public get values(): Array<Contract.DataValue> {\n    return this._values;\n  }\n\n  public get type(): FilterDomainType {\n    return this._domainType;\n  }\n}\n\nexport class RangeDomain implements Contract.RangeDomain {\n  public constructor(private _min: Contract.DataValue, private _max: Contract.DataValue, private _domainType: FilterDomainType) {}\n\n  public get type(): FilterDomainType {\n    return this._domainType;\n  }\n\n  public get min(): Contract.DataValue {\n    return this._min;\n  }\n\n  public get max(): Contract.DataValue {\n    return this._max;\n  }\n}\n"]}