{"version":3,"file":"ZoneServiceImpl.js","sourceRoot":"","sources":["../../../../../src/ApiShared/Services/impl/ZoneServiceImpl.ts"],"names":[],"mappings":";;AACA,gFAAkF;AAClF,gFAAwE;AACxE,sGAA4H;AAE5H,2DAAwD;AACxD,6CAA0C;AAG1C,uDAAoD;AAEpD,MAAa,eAAgB,SAAQ,iCAAe;IAClD,IAAW,WAAW;QACpB,iCAAyB;IAC3B,CAAC;IAEM,kBAAkB,CACvB,SAAiB,EACjB,gBAAkD,EAClD,iBAA6C;QAE7C,MAAM,UAAU,GAAG;YACjB,CAAC,sCAAW,CAAC,YAAY,CAAC,EAAE,oBAAoB;YAChD,CAAC,sCAAW,CAAC,SAAS,CAAC,EAAE,SAAS;YAClC,CAAC,sCAAW,CAAC,oBAAoB,CAAC,EAAE,EAAE;SACvC,CAAC;QAEF,2EAA2E;QAC3E,MAAM,cAAc,GAAG,aAAK,CAAC,qBAAqB,CAAC,iBAAiB,EAAE,mBAAmB,CAAC,CAAC;QAE3F,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;YACpC,2BAAY,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;YAC3E,2BAAY,CAAC,eAAe,CAAgC,KAAK,EAAE,wDAA6B,EAAE,+BAA+B,CAAC,CAAC;YACnI,UAAU,CAAC,sCAAW,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,GAAG,+DAAqB,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC7G,CAAC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,OAAO,CAAC,iCAAM,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC,IAAI,CAAO,CAAC,QAAQ,EAAE,EAAE;YAChF,OAAO;QACT,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,kBAAkB,CACvB,SAAiB,EACjB,gBAAkD,EAClD,yCAA6F;QAE7F,MAAM,UAAU,GAAG;YACjB,CAAC,sCAAW,CAAC,SAAS,CAAC,EAAE,SAAS;YAClC,CAAC,sCAAW,CAAC,wCAAwC,CAAC,EAAE,yCAAyC;SAClG,CAAC;QAEF,yCAAyC,CAAC,OAAO,CAAC,CAAC,eAA8D,EAAE,EAAE;YACnH,2BAAY,CAAC,4BAA4B,CAAC,gBAAgB,EAAE,eAAe,CAAC,iBAAiB,CAAC,CAAC;YAC/F,2BAAY,CAAC,0DAA0D,CAAC,eAAe,CAAC,CAAC;QAC3F,CAAC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,OAAO,CAAC,iCAAM,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC,IAAI,CAAO,CAAC,QAAQ,EAAE,EAAE;YACjF,OAAO;QACT,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAjDD,0CAiDC","sourcesContent":["import * as Contract from '@tableau/api-external-contract-js';\nimport { DashboardObjectVisibilityType } from '@tableau/api-external-contract-js';\nimport { ParameterId, VerbId } from '@tableau/api-internal-contract-js';\nimport { ExternalToInternalEnumMappings as ExternalEnumConverter } from '../../EnumMappings/ExternalToInternalEnumMappings';\nimport { DashboardObjectImpl } from '../../Impl/DashboardObjectImpl';\nimport { ErrorHelpers } from '../../Utils/ErrorHelpers';\nimport { Param } from '../../Utils/Param';\nimport { ServiceNames } from '../ServiceRegistry';\nimport { ZoneService } from '../ZoneService';\nimport { ServiceImplBase } from './ServiceImplBase';\n\nexport class ZoneServiceImpl extends ServiceImplBase implements ZoneService {\n  public get serviceName(): string {\n    return ServiceNames.Zone;\n  }\n\n  public setVisibilityAsync(\n    dashboard: string,\n    dashboardZoneMap: Map<number, DashboardObjectImpl>,\n    zoneVisibilityMap: Contract.ZoneVisibilityMap,\n  ): Promise<void> {\n    const parameters = {\n      [ParameterId.FunctionName]: 'setVisibilityAsync',\n      [ParameterId.Dashboard]: dashboard,\n      [ParameterId.ZoneIdsVisibilityMap]: {},\n    };\n\n    // zoneVisibilityMap can be either an object or a Map - convert it to a Map\n    const parameterAsMap = Param.convertParameterToMap(zoneVisibilityMap, 'zoneVisibilityMap');\n\n    parameterAsMap.forEach((value, key) => {\n      ErrorHelpers.verifyZoneIsValid(dashboardZoneMap, Number.parseInt(key, 10));\n      ErrorHelpers.verifyEnumValue<DashboardObjectVisibilityType>(value, DashboardObjectVisibilityType, 'DashboardObjectVisibilityType');\n      parameters[ParameterId.ZoneIdsVisibilityMap][key] = ExternalEnumConverter.setVisibilityType.convert(value);\n    });\n\n    return this.execute(VerbId.SetZoneVisibility, parameters).then<void>((response) => {\n      return;\n    });\n  }\n\n  public moveAndResizeAsync(\n    dashboard: string,\n    dashboardZoneMap: Map<number, DashboardObjectImpl>,\n    dashboardObjectPositionAndSizeUpdateArray: Contract.DashboardObjectPositionAndSizeUpdateArray,\n  ): Promise<void> {\n    const parameters = {\n      [ParameterId.Dashboard]: dashboard,\n      [ParameterId.DashboardObjectPositionAndSizeUpdateList]: dashboardObjectPositionAndSizeUpdateArray,\n    };\n\n    dashboardObjectPositionAndSizeUpdateArray.forEach((dashboardObject: Contract.DashboardObjectPositionAndSizeUpdate) => {\n      ErrorHelpers.verifyZoneIsValidAndFloating(dashboardZoneMap, dashboardObject.dashboardObjectID);\n      ErrorHelpers.verifyWidthAndHeightOfDashboardObjectPositionAndSizeUpdate(dashboardObject);\n    });\n\n    return this.execute(VerbId.MoveAndResizeZones, parameters).then<void>((response) => {\n      return;\n    });\n  }\n}\n"]}