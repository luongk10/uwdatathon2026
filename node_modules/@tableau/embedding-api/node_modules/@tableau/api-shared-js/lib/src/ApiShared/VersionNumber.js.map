{"version":3,"file":"VersionNumber.js","sourceRoot":"","sources":["../../../src/ApiShared/VersionNumber.ts"],"names":[],"mappings":";;AAAA,gFAA+D;AAC/D,iDAA8C;AAG9C;;;GAGG;AACH,MAAa,aAAa;IAOxB,8DAA8D;IAC9D,4CAA4C;IAC5C,YAAmB,aAAqB,EAAE,OAAgB;QACxD,MAAM,OAAO,GAAG,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7C,aAAa,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAE3B,MAAM,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACnE,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACtB,MAAM,IAAI,2BAAY,CAAC,qCAAU,CAAC,aAAa,EAAE,2BAA2B,aAAa,EAAE,CAAC,CAAC;SAC9F;QAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAEO,cAAc,CAAC,gBAAwB;QAC7C,MAAM,aAAa,GAAG,CAAC,CAAC,CAAC;QACzB,IAAI,CAAC,gBAAgB,EAAE;YACrB,OAAO,aAAa,CAAC;SACtB;QAED,mGAAmG;QACnG,MAAM,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5C,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;IAC/D,CAAC;IAED,IAAW,cAAc;QACvB,OAAO,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;IACnD,CAAC;IAED,IAAW,kBAAkB;QAC3B,OAAO,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,QAAQ,IAAI,CAAC,KAAK,EAAE,CAAC;IACrE,CAAC;CACF;AA3CD,sCA2CC","sourcesContent":["import { ErrorCodes } from '@tableau/api-external-contract-js';\nimport { TableauError } from './TableauError';\nimport { VersionNumberContract } from './VersionNumberContract';\n\n/**\n * Represents the current version of the extensions, embedding\n * and extensions-api-types library\n */\nexport class VersionNumber implements VersionNumberContract {\n  public major: number;\n  public minor: number;\n  public fix: number;\n  public build: number;\n  public isAlpha: boolean;\n\n  // private constructor so everyone uses the singleton instance\n  // build numbers have this form: M.m.f-pre.N\n  public constructor(versionString: string, isAlpha: boolean) {\n    const partStr = versionString.split('-');\n    this.build = this.getBuildNumber(partStr[1]);\n    versionString = partStr[0];\n\n    const parts = versionString.split('.').map((p) => parseInt(p, 10));\n    if (parts.length !== 3) {\n      throw new TableauError(ErrorCodes.InternalError, `Invalid version number: ${versionString}`);\n    }\n\n    this.major = parts[0];\n    this.minor = parts[1];\n    this.fix = parts[2];\n    this.isAlpha = isAlpha;\n  }\n\n  private getBuildNumber(preReleaseString: string): number {\n    const noBuildNumber = -1;\n    if (!preReleaseString) {\n      return noBuildNumber;\n    }\n\n    // The preRelease string has this form: pre.N, but we don't depend on the actual string being 'pre'\n    const partStr = preReleaseString.split('.');\n    return partStr[1] ? parseInt(partStr[1], 10) : noBuildNumber;\n  }\n\n  public get formattedValue(): string {\n    return `${this.major}.${this.minor}.${this.fix}`;\n  }\n\n  public get fullFormattedValue(): string {\n    return `${this.major}.${this.minor}.${this.fix}-pre.${this.build}`;\n  }\n}\n"]}